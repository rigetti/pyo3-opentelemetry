[package]
name = "pyo3-tracing-subscriber"
version = "0.1.2-rc.0"
edition = "2021"
categories = ["Python bindings", "OpenTelemetry", "Tracing"]
keywords = ["python", "pyo3", "opentelemetry", "tracing"]
license = "Apache-2.0"
readme = "./README.md"
description = "A Python module for configuring and initializing tracing subscribers from Python."
repository = "https://github.com/rigetti/pyo3-opentelemetry"
rust-version = "1.67.0"

[dependencies]
handlebars = { version = "4.4.0", optional = true }
pyo3 = { workspace = true }
opentelemetry = { workspace = true, features = ["rt-tokio"] }
opentelemetry-otlp = { version = "0.13.0", optional = true }
opentelemetry-proto = { version = "0.3.0", optional = true, features = ["tonic"] }
opentelemetry-stdout = { version = "0.1.0", optional = true, features = ["trace"] }
opentelemetry_api = { workspace = true }
opentelemetry_sdk = { workspace = true, features = ["rt-tokio-current-thread"] }
pyo3-asyncio = { workspace = true, features = ["tokio-runtime"] }
serde = { workspace = true }
thiserror = { workspace = true }
tokio = { workspace = true, features = ["rt-multi-thread"] }
tonic = { version = "0.9.2", optional = true }
tracing = { workspace = true }
tracing-opentelemetry = { workspace = true }
tracing-subscriber = { workspace = true, features = ["env-filter", "fmt", "json"] }

[features]
layer-otel-otlp = ["dep:opentelemetry-otlp", "dep:opentelemetry-proto", "dep:tonic"]
layer-otel-otlp-file = ["dep:opentelemetry-stdout"]
stubs = ["dep:handlebars"]

[dev-dependencies]
rstest = { workspace = true }
serde_json = "1.0.107"
tempfile = "3.8.0"
